<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0 ,user-scalable=no, minimum-scale=1.0, maximum-scale=1.0">
    <link rel="stylesheet" href="css/tai.css">
</head>
<body>
    <div id="wrap">
        <div class="scrollBar"></div>
        <div class="head">
            <div class="head-top">
                <h1 class="logo">
                    <a href="https://music.163.com/">
                        <img src="img/logo_new.png" alt="">
                    </a>
                </h1>        
                <a href="javascript:;" class="menu"></a>
                <div class="btns">
                    <div class="btn1">
                        <a href="http://m.yinyuetai.com/login?redirect=http://m.yinyuetai.com/">登录</a>
                    </div>
                    <div class="btn2">
                        <a href="http://m.yinyuetai.com/login?redirect=http://m.yinyuetai.com/">注册</a>
                    </div>
                </div>
            </div>
            <div class="head-bottom">
                <form method="post">
                    <input type="text" placeholder="请输入查询内容"/>
					<input type="submit" value="搜索"/>
                </form>
            </div>
            <ul class="mask">
                <li>
                    <a href="javascript:;">首页</a>
                </li>
                <li>
                    <a href="javascript:;">MV</a>
                </li>
                <li>
                    <a href="javascript:;">悦单</a>
                </li>
                <li>
                    <a href="javascript:;">V榜</a>
                </li>
                <li>
                    <a href="javascript:;">商城</a>
                </li>
                <li>
                    <a href="javascript:;">音乐</a>
                </li>
                <li>
                    <a href="javascript:;">节目</a>
                </li>
                <li>
                    <a href="javascript:;">饭团</a>
                </li>
                <li>
                    <a href="javascript:;">咨询</a>
                </li>
                <li>
                    <a href="javascript:;">我的家</a>
                </li>
                <li>
                    <a href="javascript:;">APP下载</a>
                </li>
                <li>
                    <a href="javascript:;">热门应用</a>
                </li>
            </ul>
        </div>
        <div class="content">
            <div>
                <!-- 导航 -->
                <div class="zhuzhu-wrap-drag-nav">
                    <ul class="list">
                        <li>
                            <a href="javascript:;" class="active">首页</a>
                        </li>
                        <li>
                            <a href="javascript:;">MV</a>
                        </li>
                        <li>
                            <a href="javascript:;">悦单</a>
                        </li>
                        <li>
                            <a href="javascript:;">V榜</a>
                        </li>
                        <li>
                            <a href="javascript:;">商城</a>
                        </li>
                        <li>
                            <a href="javascript:;">音乐</a>
                        </li>
                        <li>
                            <a href="javascript:;">节目</a>
                        </li>
                        <li>
                            <a href="javascript:;">饭团</a>
                        </li>
                        <li>
                            <a href="javascript:;">咨询</a>
                        </li>
                        <li>
                            <a href="javascript:;">我的家</a>
                        </li>
                        <li>
                            <a href="javascript:;">APP下载</a>
                        </li>
                        <li>
                            <a href="javascript:;">热门应用</a>
                        </li>
                    </ul>
                </div>
                <!-- 无缝滑屏 -->
                <div class="carousel-wrap" needCarousel needAuto>
                    <div class="point-wrap">					
                    </div>
                </div>
                <!-- tap选项卡 -->
                <div class="tap-wrap">
                    <div class="tap-head">
                        <h2>MV首播</h2>
                        <span>更多&gt</span>
                    </div>
                    <div class="tap-nav">
                        <a href="">全部</a>
                        <a href="">内地</a>
                        <a href="">港台</a>
                        <a href="">欧美</a>
                        <a href="">韩国</a>
                        <a href="">日本</a>
                        <div class="smallB"></div>
                    </div>
                    <div class="tap-content">
                        <ul class="tap-loading"></ul>
                        <ul>
                            <li>
                                <a href="javascript:;">
                                    <img src="img/tap01.jpg" alt="">
                                    <span>希望孤独择日终止</span>
                                </a>
                                <div class="tap-discuss">
                                    <div class="left">
                                        <span></span>
                                        <span>999</span>
                                    </div>
                                    <div class="right">
                                        <span></span>
                                        <span>4050</span>
                                    </div>
                                </div>
                            </li>
                            <li>
                                <a href="javascript:;">
                                    <img src="img/tap02.jpg" alt="">
                                    <span>有一种喜欢叫心甘情愿</span>
                                </a>
                                <div class="tap-discuss">
                                    <div class="left">
                                        <span></span>
                                        <span>562</span>
                                    </div>
                                    <div class="right">
                                        <span></span>
                                        <span>5822</span>
                                    </div>
                                </div>
                            </li>
                            <li>
                                <a href="javascript:;">
                                    <img src="img/tap03.jpg" alt="">
                                    <span>你走以后 再也没有</span>
                                </a>
                                <div class="tap-discuss">
                                    <div class="left">
                                        <span></span>
                                        <span>459</span>
                                    </div>
                                    <div class="right">
                                        <span></span>
                                        <span>3641</span>
                                    </div>
                                </div>
                            </li>
                            <li>
                                <a href="javascript:;">
                                    <img src="img/tap04.jpg" alt="">
                                    <span>长大的你 学会了回忆和怀念</span>
                                </a>
                                <div class="tap-discuss">
                                    <div class="left">
                                        <span></span>
                                        <span>789</span>
                                    </div>
                                    <div class="right">
                                        <span></span>
                                        <span>2500</span>
                                    </div>
                                </div>
                            </li>
                            <li>
                                <a href="javascript:;">
                                    <img src="img/tap05.jpg" alt="">
                                    <span>每一次相遇 我都充满期待</span>
                                </a>
                                <div class="tap-discuss">
                                    <div class="left">
                                        <span></span>
                                        <span>589</span>
                                    </div>
                                    <div class="right">
                                        <span></span>
                                        <span>6589</span>
                                    </div>
                                </div>
                            </li>
                            <li>
                                <a href="javascript:;">
                                    <img src="img/tap06.jpg" alt="">
                                    <span>你是我遥不可及的梦</span>
                                </a>
                                <div class="tap-discuss">
                                    <div class="left">
                                        <span></span>
                                        <span>789</span>
                                    </div>
                                    <div class="right">
                                        <span></span>
                                        <span>6985</span>
                                    </div>
                                </div>
                            </li>
                        </ul>
                        <ul class="tap-loading"></ul>
                    </div>            
                </div>
    
                <div class="tap-wrap">
                <div class="tap-head">
                    <h2>猜你喜欢</h2>
                    <span>更多&gt</span>
                </div>
                <div class="tap-nav">
                    <a href="">华语</a>
                    <a href="">流行</a>
                    <a href="">电子</a>
                    <a href="">摇滚</a>
                    <a href="">民谣</a>
                    <a href="">说唱</a>
                    <div class="smallB"></div>
                </div>
                <div class="tap-content">
                    <ul class="tap-loading"></ul>
                    <ul>
                        <li>
                            <a href="javascript:;">
                                <img src="img/tap07.jpg" alt="">
                                <span>总有人后来居上</span>
                            </a>
                            <div class="tap-discuss">
                                <div class="left">
                                    <span></span>
                                    <span>445</span>
                                </div>
                                <div class="right">
                                    <span></span>
                                    <span>6581</span>
                                </div>
                            </div>
                        </li>
                        <li>
                            <a href="javascript:;">
                                <img src="img/tap08.jpg" alt="">
                                <span>今天风超甜 因为你来过</span>
                            </a>
                            <div class="tap-discuss">
                                <div class="left">
                                    <span></span>
                                    <span>562</span>
                                </div>
                                <div class="right">
                                    <span></span>
                                    <span>5822</span>
                                </div>
                            </div>
                        </li>
                        <li>
                            <a href="javascript:;">
                                <img src="img/tap09.jpg" alt="">
                                <span>未曾谋面的终会相遇</span>
                            </a>
                            <div class="tap-discuss">
                                <div class="left">
                                    <span></span>
                                    <span>489</span>
                                </div>
                                <div class="right">
                                    <span></span>
                                    <span>9985</span>
                                </div>
                            </div>
                        </li>
                        <li>
                            <a href="javascript:;">
                                <img src="img/tap10.jpg" alt="">
                                <span>想见就见得日子要好好珍惜</span>
                            </a>
                            <div class="tap-discuss">
                                <div class="left">
                                    <span></span>
                                    <span>662</span>
                                </div>
                                <div class="right">
                                    <span></span>
                                    <span>7891</span>
                                </div>
                            </div>
                        </li>
                        <li>
                            <a href="javascript:;">
                                <img src="img/tap11.jpg" alt="">
                                <span>请相信爱情永远不会迟到</span>
                            </a>
                            <div class="tap-discuss">
                                <div class="left">
                                    <span></span>
                                    <span>520</span>
                                </div>
                                <div class="right">
                                    <span></span>
                                    <span>1314</span>
                                </div>
                            </div>
                        </li>
                        <li>
                            <a href="javascript:;">
                                <img src="img/tap12.jpg" alt="">
                                <span>那个夜晚 我哭了很久</span>
                            </a>
                            <div class="tap-discuss">
                                <div class="left">
                                    <span></span>
                                    <span>698</span>
                                </div>
                                <div class="right">
                                    <span></span>
                                    <span>3654</span>
                                </div>
                            </div>
                        </li>
                    </ul>
                    <ul class="tap-loading"></ul>
                </div>
                </div>

                
            </div>
        </div>
    </div>
</body>
    <script src="js/zhuzhu.js" type="text/javascript"></script>
    <script src="js/tools.js"></script>
    <script type="text/javascript"> 
        window.onload = function(){
            // 静止默认行为
            document.addEventListener("touchstart",function(ev){
                ev = ev || event
                ev.preventDefault()
            })

            // 进行适配
            ;(function(){
                var styleNode = document.createElement("style")
                var w = document.documentElement.clientWidth/16
                styleNode.innerHTML = "html{font-size:"+w+"px!important}"
                document.head.appendChild(styleNode)
            })()


            

            // 竖向滑屏
            vMove()
            function vMove(){
                var headBottom = document.querySelector("#wrap .head .head-bottom")
                var head = document.querySelector("#wrap .head")
                var h = head.offsetHeight
                var content = document.querySelector("#wrap .content")
                var wrap = document.querySelector("#wrap .content > div")
                var bar = document.querySelector("#wrap .scrollBar")
                var scale = document.documentElement.clientHeight/(head.offsetHeight+wrap.offsetHeight)
                bar.style.height = document.documentElement.clientHeight*scale+"px"
            
                var callback = {
                    start:function(){
                        bar.style.opacity = 1
                    },
                    move:function(){
                        var scale = zhuzhu.css(this,"translateY")/(wrap.offsetHeight - content.clientHeight)
                        zhuzhu.css(bar,"translateY",-scale*(document.documentElement.clientHeight -bar.offsetHeight ))                    
                    
                        
                    },
                    autoMove:function(){
                        var scale = zhuzhu.css(this,"translateY")/(wrap.offsetHeight - content.clientHeight)
						//scale = 实时距离/最大距离
						zhuzhu.css(bar,"translateY",-scale*(document.documentElement.clientHeight -bar.offsetHeight ))
                    },
                    end:function(){
                        bar.style.opacity = 0
                    }
                }
                zhuzhu.vMove(content,callback)
            }

            // 无缝滑屏
            swiper()
            function swiper(){
                var arr=["img/1.jpg","img/2.jpg","img/3.jpg","img/4.jpg","img/5.jpg"]				
                zhuzhu.carousel(arr)

            }

            // 导航条变色
            changeColor()
            function changeColor(){
                var list = document.querySelector("#wrap .content .zhuzhu-wrap-drag-nav .list")
                var aNodes = document.querySelectorAll("#wrap .content .zhuzhu-wrap-drag-nav .list > li a")
                var isMove = true
                list.addEventListener("touchstart",function(){
                    isMove = false
                })
                list.addEventListener("touchmove",function(){
                    isMove = true
                })
                list.addEventListener("touchend",function(ev){
                    if(!isMove){
                        ev = ev || event
                        for(var i=0;i<aNodes.length;i++){
                            tools.removeClass(aNodes[i],"active")
                        }
                        var touchC = ev.changedTouches[0]
                        tools.addClass(touchC.target,"active")
                    }
                })
            }

            // 导航条拖拽
            drag()
            function drag(){
                zhuzhu.dragNav()
            }

            // tap选项卡
            tap()
            function tap(){
                var wrap = document.querySelector("#wrap .content .tap-wrap")
                var contentNodes = document.querySelectorAll("#wrap .content .tap-wrap .tap-content")
                var w = wrap.clientWidth

                
                for(var i=0;i<contentNodes.length;i++){
                    move(contentNodes[i])
                }

                function move(content){
                    var loadings = content.querySelectorAll(".tap-loading")
                    // 小黑初始下标
                    var now = 0
                    var smallB = content.parentNode.querySelector(".tap-nav .smallB")
                    var aNodes = content.parentNode.querySelectorAll(".tap-nav a")
                    zhuzhu.css(content,"translateX",-w)

                    //滑屏逻辑 content既是滑屏区域又是滑屏元素、
                    var startPoint = {x:0,y:0}
                    var elementPoint = {x:0,y:0}
                    // 防抖元素
                    var isX = true
                    var isFirst = true

                    // 在二分之一跳转'
                    var isOver = false
                    content.addEventListener("touchstart",function(ev){
                        // isOver = false
                        if(isOver){
							return;
						}

                        ev = ev || event
                        var touchC = ev.changedTouches[0]
                        startPoint.x = touchC.clientX
                        startPoint.y = touchC.clientY
                        elementPoint.x = zhuzhu.css(content,"translateX")
                        elementPoint.y = zhuzhu.css(content,"translateY")

                        isX = true
                        isFirst = true

                        content.style.transition = "none"

                    })
                    content.addEventListener("touchmove",function(ev){
                        if(isOver){
							return
						}
                        if(!isX){
                            return
                        } 

                        ev = ev || event
                        var touchC = ev.changedTouches[0]
                        
                        var nowPoint = {x:0,y:0}
                        var disPoint = {x:0,y:0}
                        nowPoint.x = touchC.clientX
                        nowPoint.y = touchC.clientY
                        disPoint.x = nowPoint.x - startPoint.x
                        disPoint.y = nowPoint.y - startPoint.y

                        if(isFirst){
                            isFirst = false
                            if(Math.abs(disPoint.y) > Math.abs(disPoint.x)){
                                isX = false
                                return
                            }
                        }
                        
                        var translateX = disPoint.x + elementPoint.x
                        zhuzhu.css(content,"translateX",translateX)
                        
                        jump(disPoint.x)



                    })


                    content.addEventListener("touchend",function(ev){
                        if(isOver){
                            return
                        }

                        ev = ev || event
                        var touchC = ev.changedTouches[0]
                        var nowPoint = {x:0,y:0}
                        var disPoint = {x:0,y:0}
                        nowPoint.x = touchC.clientX
                        disPoint.x = nowPoint.x - startPoint.x
                        if(Math.abs(disPoint.x)<=w/2){
                            content.style.transition = "1s transform"
                            zhuzhu.css(content,"translateX",-w)
                        }
                    })

                    // 二分之一跳转  ------->  请求
                    function jump(disX){
                        if(isOver){
                            return
                        }
                        if(Math.abs(disX) > w/2){
                            isOver=true
                            content.style.transition = "1s transform"
                            var targetX = disX>0?0:-2*w
                            zhuzhu.css(content,"translateX",targetX)
                        
                            // 动画结束后发送请求
                            content.addEventListener("transitionend",endFn)
                            content.addEventListener("webkitTransitionEnd",endFn)
                            
                            function endFn(){
                                content.removeEventListener("transitionend",endFn)
                                content.removeEventListener("webkitTransitionEnd",endFn)
                                content.style.transition = "none"

                                for(var i=0;i<loadings.length;i++){
                                    loadings[i].style.opacity = 1
                                }

                                //对now进行控制
								//往右滑 --   往左滑++
                                disX>0?now--:now++
                                if(now<0){
                                    now = aNodes.length-1
                                }else if(now>aNodes.length-1){
                                    now = 0
                                }

                                zhuzhu.css(smallB,"translateX",aNodes[now].offsetLeft)


                                //发ajax请求  去服务端拿数据
                                // 现在模拟
                                setTimeout(function(){
                                    for(var i=0;i<loadings.length;i++){
                                        loadings[i].style.opacity = 0
                                    }
                                    zhuzhu.css(content,"translateX",-w)
                                    isOver = false
                                },2000)
                            }
                        }
                    }
                }
            }

            // 面包导航
            CMCFMenuBtn()
            function CMCFMenuBtn(){
                var menuBtn = document.querySelector("#wrap .head .head-top .menu")
                var mask = document.querySelector("#wrap .head .mask")
            
                var flag = false
                menuBtn.addEventListener("touchstart",function(ev){
                    ev = ev || event
                    var touchC = ev.changedTouches[0]
                    if(!flag){
                        mask.style.display = "block"
                    }else{
                        mask.style.display = "none"
                    }
                    flag =! flag
                    ev.stopPropagation();
					ev.preventDefault();
                })

                document.addEventListener("touchstart",function(ev){
                    if(flag){
                        mask.style.display = "none"
                        flag=!flag
                    }

                })
                mask.addEventListener("touchstart",function(ev){
                    ev = ev||event;
                    ev.stopPropagation();
					ev.preventDefault();
                })
            }
        }
    </script>
</html>